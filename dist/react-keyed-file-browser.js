!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["react-keyed-file-browser"]=t():e["react-keyed-file-browser"]=t()}(self,(()=>(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{BROWSER_COLUMNS:()=>hn,BaseFile:()=>te,BaseFileConnectors:()=>ee,BaseFolder:()=>ot,BaseFolderConnectors:()=>rt,Details:()=>n,FileRenderers:()=>l,Filters:()=>r,FolderRenderers:()=>a,Groupers:()=>c,Headers:()=>i,Icons:()=>u,RawFileBrowser:()=>yn,Sorters:()=>s,Utils:()=>o,default:()=>wn});var n={};e.r(n),e.d(n,{DefaultDetail:()=>S});var r={};e.r(r),e.d(r,{DefaultFilter:()=>j});var o={};e.r(o),e.d(o,{isFolder:()=>A,moveFilesAndFolders:()=>x});var i={};e.r(i),e.d(i,{TableHeader:()=>pe});var l={};e.r(l),e.d(l,{ListThumbnailFile:()=>Ee,RawListThumbnailFile:()=>Se,RawTableFile:()=>Je,SimpleListThumbnailFile:()=>Ne,TableFile:()=>Ye});var a={};e.r(a),e.d(a,{ListThumbnailFolder:()=>vt,RawListThumbnailFolder:()=>bt,RawTableFolder:()=>kt,TableFolder:()=>jt});var c={};e.r(c),e.d(c,{GroupByFolder:()=>Mt,GroupByModifiedRelative:()=>qt});var s={};e.r(s),e.d(s,{SortByModified:()=>$t,SortByName:()=>Ht});var u={};e.r(u),e.d(u,{FontAwesome:()=>Fn});const f=require("prop-types");var p=e.n(f);const d=require("react");var h=e.n(d);const m=require("i18next");var y=e.n(m);const b=require("react-dnd"),g=require("react-i18next");function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(l,e);var t,n,r,o,i=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=O(r);if(o){var n=O(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))).handleCloseClick=function(t){t&&t.preventDefault(),e.props.close()},e}return t=l,(n=[{key:"render",value:function(){var e=this.props.t,t=this.props.file.key.split("/");return t=t.length?t[t.length-1]:"",h().createElement("div",null,h().createElement("h2",null,e("itemDetail")),h().createElement("dl",null,h().createElement("dt",null,"Key"),h().createElement("dd",null,this.props.file.key),h().createElement("dt",null,e("name")),h().createElement("dd",null,t)),h().createElement("a",{href:"#",onClick:this.handleCloseClick},"Close"))}}])&&F(t.prototype,n),l}(h().Component);D.propTypes={file:p().shape({key:p().string.isRequired,name:p().string.isRequired,extension:p().string.isRequired,url:p().string}).isRequired,close:p().func};const S=(0,g.withNamespaces)()(D);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},R(e,t)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(l,e);var t,n,r,o,i=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(r);if(o){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))).handleFilterChange=function(t){var n=t.target.value;e.props.updateFilter(n)},e}return t=l,(n=[{key:"render",value:function(){var e=this.props.t;return h().createElement("input",{type:"search",placeholder:e("filterFiles"),value:this.props.value,onChange:this.handleFilterChange})}}])&&P(t.prototype,n),l}(h().Component);C.propTypes={value:p().string.isRequired,updateFilter:p().func};const j=(0,g.withNamespaces)()(C),N=require("classnames");var T=e.n(N);const _=require("react-dnd-html5-backend");function A(e){return e.key.endsWith("/")}function x(e,t,n){if(t.didDrop()){var r=t.getDropResult(),o=[],i=[];e.browserProps.selection.forEach((function(e){"/"===e[e.length-1]?o.push(e):i.push(e)})),e.browserProps.openFolder(r.path),o.forEach((function(t){var n=t,o=n.split("/"),i=o[o.length-2],l="".concat(r.path).concat(i,"/");l.substr(0,n.length)!==n&&l!==n&&e.browserProps.moveFolder&&e.browserProps.moveFolder(n,l)})),i.forEach((function(t){var n=t,o=n.split("/"),i=o[o.length-1],l="".concat(r.path).concat(i);l!==n&&e.browserProps.moveFile&&e.browserProps.moveFile(n,l)}))}}function I(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=B(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(a)throw i}}}}function B(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}for(var K={},L=0,U=Object.entries({Archive:["zip","rar","7z"],Audio:["mp3","ogg","wav","aac"],Excel:["xls","xlsx"],Image:["jpg","jpeg","png","bmp"],PDF:["pdf"],PowerPoint:["ppt","pptx"],Text:["txt"],Video:["mp4","flv","avi","wmv","mov"],Word:["doc","docx"],Code:["js"]});L<U.length;L++){var q,V=(H=U[L],Z=2,function(e){if(Array.isArray(e))return e}(H)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,o,i=[],l=!0,a=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(e){a=!0,o=e}finally{try{l||null==n.return||n.return()}finally{if(a)throw o}}return i}}(H,Z)||B(H,Z)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),z=V[0],W=I(V[1]);try{for(W.s();!(q=W.n()).done;){var G=q.value;K[G]=z}}catch(e){W.e(e)}finally{W.f()}}var H,Z;function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e,t){return Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Y(e,t)}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(e)}var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(l,e);var t,n,r,o,i=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Q(r);if(o){var n=Q(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))).state={newName:e.getName()},e.handleFileClick=function(t){t&&t.preventDefault(),e.props.browserProps.preview({url:e.props.url,name:e.getName(),key:e.props.fileKey,extension:e.getExtension()})},e.handleItemClick=function(t){t.stopPropagation(),e.props.browserProps.select(e.props.fileKey,"file",t.ctrlKey||t.metaKey,t.shiftKey)},e.handleItemDoubleClick=function(t){t.stopPropagation(),"function"==typeof e.props.browserProps.fileDoubleClick&&e.props.browserProps.fileDoubleClick(e.props.fileKey)},e.handleRenameClick=function(t){e.props.browserProps.renameFile&&e.props.browserProps.beginAction("rename",e.props.fileKey)},e.handleNewNameChange=function(t){var n=t.target.value;e.setState({newName:n})},e.handleRenameSubmit=function(t){if(t&&t.preventDefault(),e.props.browserProps.renameFile){var n=e.state.newName.trim();if(0!==n.length&&!["/","\\"].some((function(e){return-1!==n.indexOf(e)}))){var r=n,o=e.props.fileKey.lastIndexOf("/");-1!==o&&(r="".concat(e.props.fileKey.substr(0,o),"/").concat(n)),e.props.browserProps.renameFile(e.props.fileKey,r)}}},e.handleDeleteClick=function(t){e.props.browserProps.deleteFile&&e.props.browserProps.beginAction("delete",e.props.fileKey)},e.handleDeleteSubmit=function(t){t.preventDefault(),e.props.browserProps.deleteFile&&e.props.browserProps.deleteFile(e.props.browserProps.actionTargets)},e.handleCancelEdit=function(t){e.props.browserProps.endAction()},e}return t=l,(n=[{key:"selectFileNameFromRef",value:function(e){if(e){var t=e.value,n=t.lastIndexOf(".");e.setSelectionRange(0,n||t.length),e.focus()}}},{key:"getName",value:function(){var e=this.props.newKey||this.props.fileKey,t=e.lastIndexOf("/");return-1!==t&&(e=e.substr(t+1)),e}},{key:"getExtension",value:function(){var e=this.props.fileKey.split(".");return e[e.length-1].toLowerCase().trim()}},{key:"getFileType",value:function(){return K[this.getExtension()]||"File"}},{key:"connectDND",value:function(e){var t=this.props.isDragging||this.props.action;return"function"!=typeof this.props.browserProps.moveFile||t||this.props.isRenaming||(e=this.props.connectDragSource(e)),"function"!=typeof this.props.browserProps.createFiles&&"function"!=typeof this.props.browserProps.moveFile&&"function"!=typeof this.props.browserProps.moveFolder||(e=this.props.connectDropTarget(e)),e}}])&&J(t.prototype,n),l}(h().Component);X.propTypes={fileKey:p().string,url:p().string,newKey:p().string,isRenaming:p().bool,columns:p().array,connectDragSource:p().func,connectDropTarget:p().func,isDragging:p().bool,action:p().string,browserProps:p().shape({icons:p().object,select:p().func,beginAction:p().func,endAction:p().func,preview:p().func,createFiles:p().func,moveFile:p().func,moveFolder:p().func,renameFile:p().func,deleteFile:p().func,fileDoubleClick:p().func})};var ee={dragSource:{beginDrag:function(e){return e.browserProps.selection.length&&e.browserProps.selection.includes(e.fileKey)||e.browserProps.select(e.fileKey,"file"),{key:e.fileKey}},endDrag:function(e,t,n){x(e,t)}},dragCollect:function(e,t){return{connectDragPreview:e.dragPreview(),connectDragSource:e.dragSource(),isDragging:t.isDragging()}},targetSource:{drop:function(e,t){if(!t.didDrop()){var n=e.newKey||e.fileKey,r=n.lastIndexOf("/"),o=-1!==r?n.substr(0,r+1):"",i=t.getItem();return i.files&&e.browserProps.createFiles&&e.browserProps.createFiles(i.files,o),{path:o}}}},targetCollect:function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver({shallow:!0})}}};const te=X;function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}var re;function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}function ae(e,t){return ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ae(e,t)}function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=se(e);if(t){var o=se(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,n)}}function se(e){return se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},se(e)}var ue=function(e){le(o,e);var t,n,r=ce(o);function o(){return oe(this,o),r.apply(this,arguments)}return t=o,(n=[{key:"handleHeaderClick",value:function(e){this.props.select(this.props.fileKey)}},{key:"render",value:function(){var e,t,n,r=this.props.t,o=h().createElement("tr",{className:T()("folder",{dragover:this.props.isOver,selected:this.props.isSelected})},null!==(e=this.props.columns)&&void 0!==e&&e.includes(hn.FILE)?h().createElement("th",null,r("file")):null,null!==(t=this.props.columns)&&void 0!==t&&t.includes(hn.SIZE)?h().createElement("th",{className:"size"},r("size")):null,null!==(n=this.props.columns)&&void 0!==n&&n.includes(hn.LAST_MODIFIED)?h().createElement("th",{className:"modified"},r("lastModified")):null);return"function"==typeof this.props.browserProps.createFiles||"function"==typeof this.props.browserProps.moveFile||"function"==typeof this.props.browserProps.moveFolder?this.props.connectDropTarget(o):o}}])&&ie(t.prototype,n),o}(h().Component);ue.propTypes={select:p().func,fileKey:p().string,columns:p().array,connectDropTarget:p().func,isOver:p().bool,isSelected:p().func,browserProps:p().shape({createFiles:p().func,moveFolder:p().func,moveFile:p().func})};var fe=(0,b.DropTarget)(["file","folder",_.NativeTypes.FILE],ee.targetSource,ee.targetCollect)(re=function(e){le(n,e);var t=ce(n);function n(){return oe(this,n),t.apply(this,arguments)}return n}(ue))||re;const pe=(0,g.withNamespaces)()(fe),de=require("date-fns");function he(e){if(e>1024){var t=e/1024;return t>1024?"".concat(function(e,t){if(e=parseFloat(e),isNaN(e))return parseFloat("0").toFixed(2);var n=Math.pow(10,2);return(e=(Math.round(e*n)/n).toFixed(2)).toString()}(t/1024)," MB"):"".concat(Math.round(t)," kB")}return"".concat(e," B")}function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}var ye;function be(){return be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},be.apply(this,arguments)}function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}function we(e,t){return we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},we(e,t)}function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=De(e);if(t){var o=De(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,n)}}function De(e){return De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},De(e)}var Se=function(e){Fe(o,e);var t,n,r=Oe(o);function o(){return ge(this,o),r.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e,t=this.props,n=t.thumbnail_url,r=t.action,o=t.url,i=t.isDragging,l=t.isRenaming,a=t.isSelected,c=t.isSelectable,s=t.isOver,u=t.isDeleting,f=t.showName,p=t.showSize,d=t.showModified,m=t.browserProps,y=t.connectDragPreview;e=t.icon||(n?h().createElement("div",{className:"image",style:{backgroundImage:"url("+n+")"}}):m.icons[this.getFileType()]||m.icons.File);var b,g,v,F=i||r,w=m.confirmDeletionRenderer;f&&(b=!F&&u&&1===m.selection.length?h().createElement(w,{handleDeleteSubmit:this.handleDeleteSubmit,handleFileClick:this.handleFileClick,url:o},this.getName()):!F&&l?h().createElement("form",{className:"renaming",onSubmit:this.handleRenameSubmit},h().createElement("input",{ref:this.selectFileNameFromRef,type:"text",value:this.state.newName,onChange:this.handleNewNameChange,onBlur:this.handleCancelEdit,autoFocus:!0})):h().createElement("a",{href:o,download:"download",onClick:this.handleFileClick},this.getName())),p&&(l||u||(g=h().createElement("span",{className:"size"},h().createElement("small",null,he(this.props.size))))),d&&(l||u||(v=h().createElement("span",{className:"modified"},"Last modified: ",(0,de.formatDistanceToNow)(this.props.modified,{addSuffix:!0}))));var O={};c&&(O={onClick:this.handleItemClick});var D=h().createElement("li",be({className:T()("file",{pending:r,dragging:i,dragover:s,selected:a}),onDoubleClick:this.handleItemDoubleClick},O),h().createElement("div",{className:"item"},h().createElement("span",{className:"thumb"},e),h().createElement("span",{className:"name"},b),g,v));return"function"==typeof m.moveFile&&(D=y(D)),this.connectDND(D)}}])&&ve(t.prototype,n),o}(te);Se.defaultProps={showName:!0,showSize:!0,showModified:!0,isSelectable:!0};const Ee=(0,b.DragSource)("file",ee.dragSource,ee.dragCollect)(ye=(0,b.DropTarget)(["file","folder",_.NativeTypes.FILE],ee.targetSource,ee.targetCollect)(ye=function(e){Fe(n,e);var t=Oe(n);function n(){return ge(this,n),t.apply(this,arguments)}return n}(Se))||ye)||ye;function Pe(e){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pe(e)}function Re(){return Re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Re.apply(this,arguments)}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ce(e,t){return Ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ce(e,t)}function je(e){return je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},je(e)}const Ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ce(e,t)}(l,e);var t,n,r,o,i=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=je(r);if(o){var n=je(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==Pe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,e)});function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),i.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){return h().createElement(Ee,Re({},this.props,{showName:!1,showSize:!1,showModified:!1,isSelectable:!1}))}}])&&ke(t.prototype,n),l}(h().Component),Te=JSON.parse('{"noFiles":"Keine Dateien","noFilesMatching":"Keine Datei entspricht ","file":"Datei","size":"Größe","lastModified":"Zuletzt geändert","deleting":"Lösche...","renaming":"Bennen um...","moving":"Verschiebe...","addSubfolder":"Unterordner hinzufügen","rename":"Umbenennen","delete":"Löschen","download":"Herunterladen","upload":"Hochladen","addFolder":"Ordner hinzufügen","externalViewer":"Datei öffnen","confirmDeletion":"Löschen","itemDetail":"Details","name":"Name","filterFiles":"Filter","noItemsInThisFolder":"Keine Dateien in diesem Ordner"}'),_e=JSON.parse('{"noFiles":"No Files","noFilesMatching":"No files matching","file":"File","size":"Size","lastModified":"Last Modified","deleting":"Deleting...","renaming":"Renaming...","moving":"Moving....","addSubfolder":"Add Subfolder","rename":"Rename","delete":"Delete","download":"Download","upload":"Upload","addFolder":"Add Folder","externalViewer":"External Viewer","confirmDeletion":"Confirm Deletion","itemDetail":"Item Detail","name":"Name","filterFiles":"Filter","noItemsInThisFolder":"No Files in this folder"}'),Ae=JSON.parse('{"noFiles":"Ingen filer","noFilesMatching":"Ingen filer funnet","file":"Fil","size":"Størrelse","lastModified":"Sist endret","deleting":"Sletter...","renaming":"Endrer navn...","moving":"Flytter....","addSubfolder":"Legg til undermappe","rename":"Endre navn","delete":"Slett","download":"Last ned","upload":"Last opp","addFolder":"Legg til mappe","confirmDeletion":"Bekreft sletting","itemDetail":"Detaljer","name":"Navn","filterFiles":"Filter","noItemsInThisFolder":"Det er ingen filer i denne mappen"}'),xe=require("date-fns/locale/de");var Ie=e.n(xe);const Be=require("date-fns/locale/en-US");var Me=e.n(Be);const Ke=require("date-fns/locale/nb");var Le,Ue=e.n(Ke),qe={en:{translation:_e},de:{translation:Te},no_NB:{translation:Ae}};function Ve(e){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve(e)}function ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function We(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ge(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}function He(e,t){return He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},He(e,t)}function Ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$e(e);if(t){var o=$e(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){return!t||"object"!==Ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,n)}}function $e(e){return $e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},$e(e)}y().use(g.reactI18nextModule).init({resources:qe,lng:"en",keySeparator:!1,interpolation:{escapeValue:!1}});var Je=function(e){Ge(o,e);var t,n,r=Ze(o);function o(){return ze(this,o),r.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e,t=this.props,n=t.isDragging,r=t.isDeleting,o=t.isRenaming,i=t.isOver,l=t.isSelected,a=t.action,c=t.url,s=t.browserProps,u=t.connectDragPreview,f=t.depth,p=t.size,d=t.modified,m=t.columns,b=t.icon,g=null!=b?b:s.icons[this.getFileType()]||s.icons.File,v=n||a,F=s.confirmDeletionRenderer;e=!v&&r&&1===s.selection.length?h().createElement(F,{handleDeleteSubmit:this.handleDeleteSubmit,handleFileClick:this.handleFileClick,url:c},g,this.getName()):!v&&o?h().createElement("form",{className:"renaming",onSubmit:this.handleRenameSubmit},g,h().createElement("input",{ref:this.selectFileNameFromRef,type:"text",value:this.state.newName,onChange:this.handleNewNameChange,onBlur:this.handleCancelEdit,autoFocus:!0})):h().createElement("a",{href:c||"#",download:"download",onClick:this.handleFileClick},g,this.getName());var w=h().createElement("div",null,e);"function"==typeof s.moveFile&&(w=u(w));var O,D=h().createElement("tr",{className:T()("file",{pending:a,dragging:n,dragover:i,selected:l}),onClick:this.handleItemClick,onDoubleClick:this.handleItemDoubleClick},null!=m&&m.includes(hn.FILE)?h().createElement("td",{className:"name"},h().createElement("div",{style:{paddingLeft:16*f+"px"}},w)):null,null!=m&&m.includes(hn.SIZE)?h().createElement("td",{className:"size"},he(p)):null,null!=m&&m.includes(hn.LAST_MODIFIED)?h().createElement("td",{className:"modified"},void 0===d?"-":(0,de.formatDistanceToNow)(d,{addSuffix:!0,locale:(O=y().language,"de"===O?Ie():"no_NB"===O?Ue():Me())})):null);return this.connectDND(D)}}])&&We(t.prototype,n),o}(te);const Ye=(0,b.DragSource)("file",ee.dragSource,ee.dragCollect)(Le=(0,b.DropTarget)(["file","folder",_.NativeTypes.FILE],ee.targetSource,ee.targetCollect)(Le=function(e){Ge(n,e);var t=Ze(n);function n(){return ze(this,n),t.apply(this,arguments)}return n}(Je))||Le)||Le;function Qe(e){return Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qe(e)}function Xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function et(e,t){return et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},et(e,t)}function tt(e){return tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},tt(e)}var nt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&et(e,t)}(l,e);var t,n,r,o,i=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=tt(r);if(o){var n=tt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){return!t||"object"!==Qe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))).state={newName:e.props.isDraft?"New folder":e.getName()},e.handleFolderClick=function(t){t.stopPropagation(),e.props.browserProps.select(e.props.fileKey,"folder",t.ctrlKey||t.metaKey,t.shiftKey)},e.handleFolderDoubleClick=function(t){t.stopPropagation(),e.toggleFolder()},e.handleRenameClick=function(t){e.props.browserProps.renameFolder&&e.props.browserProps.beginAction("rename",e.props.fileKey)},e.handleNewNameChange=function(t){var n=t.target.value;e.setState({newName:n})},e.handleRenameSubmit=function(t){if(t.preventDefault(),e.props.browserProps.renameFolder||e.props.isDraft){var n=e.state.newName.trim();if(0!==n.length&&!["/","\\"].some((function(e){return-1!==n.indexOf(e)}))){var r=e.props.fileKey.substr(0,e.props.fileKey.substr(0,e.props.fileKey.length-1).lastIndexOf("/"));r.length&&(r+="/"),r+=n,r+="/",e.props.isDraft?e.props.browserProps.createFolder(r):e.props.browserProps.renameFolder(e.props.fileKey,r)}}},e.handleDeleteClick=function(t){e.props.browserProps.deleteFolder&&e.props.browserProps.beginAction("delete",e.props.fileKey)},e.handleDeleteSubmit=function(t){t.preventDefault(),e.props.browserProps.deleteFolder&&e.props.browserProps.deleteFolder(e.props.browserProps.actionTargets)},e.handleCancelEdit=function(t){e.props.browserProps.endAction()},e.toggleFolder=function(){e.props.browserProps.toggleFolder(e.props.fileKey)},e}return t=l,(n=[{key:"selectFolderNameFromRef",value:function(e){if(e){var t=e.value;e.setSelectionRange(0,t.length),e.focus()}}},{key:"getName",value:function(){if(this.props.name)return this.props.name;var e=this.props.fileKey.split("/");return this.props.newName||e[e.length-2]}},{key:"connectDND",value:function(e){var t=this.props.isDragging||this.props.action;return this.props.keyDerived&&("function"!=typeof this.props.browserProps.moveFolder||t||this.props.isRenaming||this.props.isDeleting||(e=this.props.connectDragSource(e)),"function"!=typeof this.props.browserProps.createFiles&&"function"!=typeof this.props.browserProps.moveFolder&&"function"!=typeof this.props.browserProps.moveFile||(e=this.props.connectDropTarget(e))),e}}])&&Xe(t.prototype,n),l}(h().Component);nt.propTypes={name:p().string,fileKey:p().string,newName:p().string,keyDerived:p().bool,isDraft:p().bool,isRenaming:p().bool,isDeleting:p().bool,connectDragSource:p().func,connectDropTarget:p().func,isDragging:p().bool,action:p().string,browserProps:p().shape({select:p().func,toggleFolder:p().func,beginAction:p().func,endAction:p().func,preview:p().func,createFiles:p().func,createFolder:p().func,moveFile:p().func,moveFolder:p().func,renameFolder:p().func,deleteFolder:p().func})};var rt={dragSource:{beginDrag:function(e){return e.browserProps.selection.length||e.browserProps.select(e.fileKey,"folder"),{key:e.fileKey}},endDrag:function(e,t,n){x(e,t)}},dragCollect:function(e,t){return{connectDragPreview:e.dragPreview(),connectDragSource:e.dragSource(),isDragging:t.isDragging()}}};const ot=nt;function it(e){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},it(e)}var lt;function at(){return at=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},at.apply(this,arguments)}function ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function st(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(n),!0).forEach((function(t){ut(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ht(e,t)}function ht(e,t){return ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ht(e,t)}function mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yt(e);if(t){var o=yt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){return!t||"object"!==it(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,n)}}function yt(e){return yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},yt(e)}var bt=function(e){dt(o,e);var t,n,r=mt(o);function o(){return ft(this,o),r.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e,t,n=this.props,r=n.isOpen,o=n.isDragging,i=n.isDeleting,l=n.isRenaming,a=n.isDraft,c=n.isOver,s=n.isSelected,u=n.url,f=n.action,p=n.browserProps,d=n.depth,m=n.keyDerived,y=n.connectDragPreview,b=n.t,g=n.icon,v=null!=g?g:p.icons[r?"FolderOpen":"Folder"],F=o||f,w=p.confirmDeletionRenderer;if(e=!F&&i&&1===p.selection.length?h().createElement(w,{handleDeleteSubmit:this.handleDeleteSubmit,handleFileClick:this.handleFileClick,url:u},this.getName()):!F&&l||a?h().createElement("div",null,h().createElement("form",{className:"renaming",onSubmit:this.handleRenameSubmit},h().createElement("input",{type:"text",ref:this.selectFolderNameFromRef,value:this.state.newName,onChange:this.handleNewNameChange,onBlur:this.handleCancelEdit,autoFocus:!0}))):h().createElement("div",null,h().createElement("a",{onClick:this.toggleFolder},this.getName())),r&&p.nestChildren){t=[];for(var O=0;O<t.length;O++){var D=t[O],S=st(st({},p.getItemProps(D,p)),{},{depth:d+1});A(D)?t.push(h().createElement(p.folderRenderer,at({},D,S,{browserProps:p},p.folderRendererProps))):t.push(h().createElement(p.fileRenderer,at({},D,S,{browserProps:p},p.fileRendererProps)))}t=t.length?h().createElement("ul",{style:{padding:"0 8px",paddingLeft:"16px"}},t):h().createElement("p",null,b("noItemsInThisFolder"))}var E=h().createElement("li",{className:T()("folder",{expanded:r&&p.nestChildren,pending:f,dragging:o,dragover:c,selected:s}),onClick:this.handleFolderClick,onDoubleClick:this.handleFolderDoubleClick},h().createElement("div",{className:"item"},h().createElement("span",{className:"thumb"},v),h().createElement("span",{className:"name"},e)),t);return"function"==typeof p.moveFolder&&m&&(E=y(E)),this.connectDND(E)}}])&&pt(t.prototype,n),o}(ot),gt=(0,b.DragSource)("folder",rt.dragSource,rt.dragCollect)(lt=(0,b.DropTarget)(["file","folder",_.NativeTypes.FILE],ee.targetSource,ee.targetCollect)(lt=function(e){dt(n,e);var t=mt(n);function n(){return ft(this,n),t.apply(this,arguments)}return n}(bt))||lt)||lt;const vt=(0,g.withNamespaces)()(gt);function Ft(e){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ft(e)}var wt;function Ot(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function St(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Et(e,t)}function Et(e,t){return Et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Et(e,t)}function Pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Rt(e);if(t){var o=Rt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){return!t||"object"!==Ft(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,n)}}function Rt(e){return Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Rt(e)}var kt=function(e){St(o,e);var t,n,r=Pt(o);function o(){return Ot(this,o),r.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e,t=this.props,n=t.isOpen,r=t.isDragging,o=t.isDeleting,i=t.isRenaming,l=t.isDraft,a=t.isOver,c=t.isSelected,s=t.action,u=t.url,f=t.browserProps,p=t.connectDragPreview,d=t.depth,m=t.children,y=t.t,b=t.icon,g=null!=b?b:f.icons[n?"FolderOpen":"Folder"],v=r||s,F=f.confirmDeletionRenderer;e=!v&&o&&1===f.selection.length?h().createElement(F,{handleDeleteSubmit:this.handleDeleteSubmit,handleFileClick:this.handleFileClick,url:u},g,this.getName()):!v&&i||l?h().createElement("div",null,h().createElement("form",{className:"renaming",onSubmit:this.handleRenameSubmit},g,h().createElement("input",{type:"text",ref:this.selectFolderNameFromRef,value:this.state.newName,onChange:this.handleNewNameChange,onBlur:this.handleCancelEdit,autoFocus:!0}))):h().createElement("div",null,h().createElement("a",{onClick:this.toggleFolder},g,this.getName()));var w=h().createElement("div",null,e);"function"==typeof f.moveFile&&(w=p(w));var O=h().createElement("tr",{className:T()("folder",{pending:s,dragging:r,dragover:a,selected:c}),onClick:this.handleFolderClick,onDoubleClick:this.handleFolderDoubleClick},h().createElement("td",{className:"name"},h().createElement("div",{style:{paddingLeft:16*d+"px"}},w)),h().createElement("td",null),h().createElement("td",null));return n&&0===m.length?h().createElement(h().Fragment,null,this.connectDND(O),h().createElement("tr",null,h().createElement("td",{className:"name"},h().createElement("div",{style:{paddingLeft:16*(d+1)+"px"}},h().createElement("i",null,y("noItemsInThisFolder")))),h().createElement("td",null),h().createElement("td",null))):this.connectDND(O)}}])&&Dt(t.prototype,n),o}(ot),Ct=(0,b.DragSource)("folder",rt.dragSource,rt.dragCollect)(wt=(0,b.DropTarget)(["file","folder",_.NativeTypes.FILE],ee.targetSource,ee.targetCollect)(wt=function(e){St(n,e);var t=Pt(n);function n(){return Ot(this,n),t.apply(this,arguments)}return n}(kt))||wt)||wt;const jt=(0,g.withNamespaces)()(Ct);var Nt=function(e){var t=e.t,n=e.children,r=e.handleDeleteSubmit,o=e.handleFileClick,i=e.url;return h().createElement("form",{className:"deleting",onSubmit:r},h().createElement("a",{href:i,download:"download",onClick:o},n),h().createElement("div",null,h().createElement("button",{type:"submit"},t("confirmDeletion"))))};Nt.propTypes={children:p().node,handleDeleteSubmit:p().func,handleFileClick:p().func,url:p().string},Nt.defaultProps={url:"#"};const Tt=(0,g.withNamespaces)()(Nt);var _t=function(e){var t=e.t,n=e.handleDeleteSubmit;return h().createElement("button",{className:"deleting",onClick:n},t("confirmDeletion"))};_t.propTypes={handleDeleteSubmit:p().func};const At=(0,g.withNamespaces)()(_t);function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function It(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(n),!0).forEach((function(t){Bt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mt(e,t){var n={contents:[],children:{}};return e.map((function(e){e.relativeKey=(e.newKey||e.key).substr(t.length);var r=n,o=e.relativeKey.split("/");o.map((function(t,n){if(n===o.length-1&&A(e))for(var i in e)r[i]=e[i];""!==t&&(A(e)||n!==o.length-1?(t in r.children==0&&(r.children[t]={contents:[],children:{}}),r=r.children[t]):r.contents.push(It(It({},e),{},{keyDerived:!0})))}))})),e=function e(n,r){""!==r&&(r+="/");var o=[];for(var i in n.children)o.push(It(It({},n.children[i]),{},{contents:void 0,keyDerived:!0,key:t+r+i+"/",relativeKey:r+i+"/",children:e(n.children[i],r+i),size:0}));return o.concat(n.contents)}(n,"")}function Kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(n),!0).forEach((function(t){Ut(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qt(e,t){for(var n,r,o=(n=[],r=new Date,n.push({name:"Today",begins:(0,de.startOfToday)(),ends:(0,de.endOfToday)(),items:[]}),n.push({name:"Yesterday",begins:(0,de.startOfYesterday)(),ends:(0,de.endOfYesterday)(),items:[]}),n.push({name:"Earlier this Week",begins:(0,de.startOfWeek)(r),ends:(0,de.endOfWeek)(r),items:[]}),n.push({name:"Last Week",begins:(0,de.startOfWeek)((0,de.addWeeks)(r,-1)),ends:(0,de.endOfWeek)((0,de.addWeeks)(r,-1)),items:[]}),(0,de.getMonth)(n[n.length-1].begins)===(0,de.getMonth)(r)&&n.push({name:"Earlier this Month",begins:(0,de.startOfMonth)(r),ends:(0,de.endOfMonth)(r),items:[]}),n),i=0;i<e.length;i++){var l=e[i];if(!A(l)){for(var a=Lt(Lt({},l),{},{keyDerived:!0}),c=!1,s=+a.modified,u=0;u<o.length;u++){var f=o[u];if(s>+f.begins&&s<=+f.ends){f.items.push(a),c=!0;break}}if(!c){var p={name:(0,de.format)(a.modified,"MMMM yyyy"),begins:(0,de.startOfMonth)(a.modified),ends:(0,de.endOfMonth)(a.modified),items:[]};p.items.push(a),o.push(p)}}}for(var d=[],h=0;h<o.length;h++){var m=o[h];m.items.length&&d.push({key:"".concat(m.name.toLowerCase().replace(" ","_"),"/"),name:m.name,children:m.items,size:0})}return d}var Vt=/(-?\d*\.?\d+)/g;function zt(e,t){for(var n=String(e.name).split(Vt),r=String(t.name).split(Vt),o=Math.min(n.length,r.length),i=0;i<o;i++){var l=parseFloat(n[i])||n[i].toLowerCase(),a=parseFloat(r[i])||r[i].toLowerCase();if(l<a)return-1;if(l>a)return 1}return 0}function Wt(e,t){return e.draft&&!t.draft?1:t.draft&&!e.draft?-1:zt(e,t)}function Gt(e){for(var t=[],n=[],r=0;r<e.length;r++){var o=e[r],i=(o.newKey||o.key).split("/");o.children?(o.name||(o.name=i[i.length-2]),t.push(o)):(o.name||(o.name=i[i.length-1]),n.push(o))}n=n.sort(zt),t=t.sort(Wt);for(var l=0;l<t.length;l++){var a=t[l];a.children=Gt(a.children)}var c=[];return(c=c.concat(t)).concat(n)}function Ht(e){return Gt(e)}function Zt(e){for(var t=[],n=[],r=0;r<e.length;r++){var o=e[r],i=(o.newKey||o.key).split("/");o.children?t.push(o):(o.name=i[i.length-1],n.push(o))}n=n.sort(de.compareAsc);for(var l=0;l<t.length;l++){var a=t[l];a.children=Zt(a.children)}var c=[];return(c=c.concat(t)).concat(n)}function $t(e){return Zt(e)}function Jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Yt=function(e){var t=e.t,n=e.selectedItems,r=e.isFolder,o=e.icons,i=e.nameFilter,l=e.canCreateFolder,a=e.onCreateFolder,c=e.canRenameFile,s=e.onRenameFile,u=e.canRenameFolder,f=e.onRenameFolder,p=e.canDeleteFile,d=e.onDeleteFile,m=e.canDeleteFolder,y=e.onDeleteFolder,b=e.canDownloadFile,g=e.onDownloadFile,v=e.canDownloadFolder,F=e.onDownloadFolder,w=e.canUploadFile,O=e.onUploadFile,D=e.canExternalViewer,S=e.onExternalViewerClick,E=[];if(n.length){var P=n.filter((function(e){return e.action}));if(P.length===n.length&&1===function(e){return function(e){if(Array.isArray(e))return Jt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(new Set(P)).length){var R;switch(P[0].action){case"delete":R=t("deleting");break;case"rename":R=t("renaming");break;default:R=t("moving")}E=h().createElement("div",{className:"item-actions"},o.Loading," ",R)}else{r&&l&&!i&&E.push(h().createElement("li",{key:"action-add-folder"},h().createElement("a",{onClick:a,href:"#",role:"button"},o.Folder," ",t("addSubfolder"))));var k=n.find((function(e){return!e.keyDerived}));k||r||!c||1!==n.length?!k&&r&&u&&E.push(h().createElement("li",{key:"action-rename"},h().createElement("a",{onClick:f,href:"#",role:"button"},o.Rename," ",t("rename")))):E.push(h().createElement("li",{key:"action-rename"},h().createElement("a",{onClick:s,href:"#",role:"button"},o.Rename," ",t("rename")))),k||r||!p?!k&&r&&m&&E.push(h().createElement("li",{key:"action-delete"},h().createElement("a",{onClick:y,href:"#",role:"button"},o.Delete," ",t("delete")))):E.push(h().createElement("li",{key:"action-delete"},h().createElement("a",{onClick:d,href:"#",role:"button"},o.Delete," ",t("delete")))),w&&O&&E.push(h().createElement("li",{key:"action-upload-file"},h().createElement("a",{onClick:O,href:"#",role:"button"},o.File," ",t("upload")))),D&&S&&E.push(h().createElement("li",{key:"action-external-viewer"},h().createElement("a",{onClick:S,href:"#",role:"button"},o.ExternalViewer," ",t("externalViewer")))),(!r&&b||r&&v)&&E.push(h().createElement("li",{key:"action-download"},h().createElement("a",{onClick:r?F:g,href:"#",role:"button"},o.Download," ",t("download")))),E=E.length?h().createElement("ul",{className:"item-actions"},E):h().createElement("div",{className:"item-actions"}," ")}}else l&&!i&&E.push(h().createElement("li",{key:"action-add-folder"},h().createElement("a",{onClick:a,href:"#",role:"button"},o.Folder," ",t("addFolder")))),w&&O&&E.push(h().createElement("li",{key:"action-upload-file"},h().createElement("a",{onClick:O,href:"#",role:"button"},o.File," ",t("upload")))),D&&S&&E.push(h().createElement("li",{key:"action-external-viewer"},h().createElement("a",{onClick:S,href:"#",role:"button"},o.ExternalViewer," ",t("externalViewer")))),E=E.length?h().createElement("ul",{className:"item-actions"},E):h().createElement("div",{className:"item-actions"}," ");return E};Yt.propTypes={selectedItems:p().arrayOf(p().object),isFolder:p().bool,icons:p().object,nameFilter:p().string,canCreateFolder:p().bool,onCreateFolder:p().func,canRenameFile:p().bool,onRenameFile:p().func,canRenameFolder:p().bool,onRenameFolder:p().func,canDeleteFile:p().bool,onDeleteFile:p().func,canDeleteFolder:p().bool,onDeleteFolder:p().func,canDownloadFile:p().bool,onDownloadFile:p().func,canDownloadFolder:p().bool,onDownloadFolder:p().func,canUploadFile:p().bool,onUploadFile:p().func,canExternalViewer:p().bool,onExternalViewerClick:p().func,onFileDoubleClick:p().func},Yt.defaultProps={selectedItems:[],isFolder:!1,icons:{},nameFilter:"",canCreateFolder:!1,onCreateFolder:null,canRenameFile:!1,onRenameFile:null,canRenameFolder:!1,onRenameFolder:null,canDeleteFile:!1,onDeleteFile:null,canDeleteFolder:!1,onDeleteFolder:null,canDownloadFile:!1,onDownloadFile:null,canDownloadFolder:!1,onDownloadFolder:null,canUploadFile:!1,onUploadFile:null,canExternalViewer:!1,onExternalViewerClick:null,onFileDoubleClick:null};const Qt=(0,g.withNamespaces)()(Yt);function Xt(e){return Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xt(e)}function en(){return en=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},en.apply(this,arguments)}function tn(e){return function(e){if(Array.isArray(e))return nn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return nn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nn(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function on(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(n),!0).forEach((function(t){ln(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ln(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function an(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&un(e,t)}function un(e,t){return un=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},un(e,t)}function fn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pn(e);if(t){var o=pn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){return!t||"object"!==Xt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,n)}}function pn(e){return pn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},pn(e)}var dn=/.*\/__new__[/]?$/gm,hn={FILE:"file",SIZE:"size",LAST_MODIFIED:"lastModified"};function mn(e,t){return{key:"file-".concat(e.key),fileKey:e.key,icon:e.icon,isSelected:t.selection.includes(e.key),isOpen:e.key in t.openFolders||t.nameFilter,isRenaming:"rename"===t.activeAction&&t.actionTargets.includes(e.key),isDeleting:"delete"===t.activeAction&&t.actionTargets.includes(e.key),isDraft:!!e.draft}}var yn=function(e){sn(o,e);var t,n,r=fn(o);function o(){var e;an(this,o);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).state={openFolders:{},selection:[],activeAction:null,actionTargets:[],t:function(){},nameFilter:"",searchResultsShown:20,previewFile:null,addFolder:null},e.getFile=function(t){var n=!1;return e.props.files.find((function(e){return e.key.startsWith(t)&&(n=!0),e.key===t}))||(n?{key:t,modified:0,size:0,relativeKey:t}:void 0)},e.createFiles=function(t,n){e.setState((function(t){var r={selection:[]};return e.props.onSelectionUpdate([]),n&&(r.openFolders=on(on({},t.openFolders),{},ln({},n,!0))),r}),(function(){e.props.onCreateFiles(t,n)}))},e.createFolder=function(t){e.setState({activeAction:null,actionTargets:[],selection:[t]},(function(){e.props.onSelectionUpdate([t]),e.props.onCreateFolder(t)}))},e.moveFile=function(t,n){e.setState({activeAction:null,actionTargets:[],selection:[n]},(function(){e.props.onSelectionUpdate([n]),e.props.onMoveFile(t,n)}))},e.moveFolder=function(t,n){e.setState((function(r){var o={activeAction:null,actionTargets:[],selection:[n]};return t in r.openFolders&&(e.props.onSelectionUpdate([n]),o.openFolders=on(on({},r.openFolders),{},ln({},n,!0))),o}),(function(){e.props.onMoveFolder(t,n)}))},e.renameFile=function(t,n){e.setState({activeAction:null,actionTargets:[],selection:[n]},(function(){e.props.onSelectionUpdate([n]),e.props.onRenameFile(t,n)}))},e.renameFolder=function(t,n){e.setState((function(e){var r={activeAction:null,actionTargets:[]};return e.selection[0].substr(0,t.length)===t&&(r.selection=[e.selection[0].replace(t,n)]),t in e.openFolders&&(r.openFolders=on(on({},e.openFolders),{},ln({},n,!0))),r}),(function(){e.props.onSelectionUpdate(e.state.selection),e.props.onRenameFolder(t,n)}))},e.deleteFile=function(t){e.setState({activeAction:null,actionTargets:[],selection:[]},(function(){e.props.onSelectionUpdate([]),e.props.onDeleteFile(t)}))},e.deleteFolder=function(t){e.setState((function(e){var n={activeAction:null,actionTargets:[],selection:[]};return t in e.openFolders&&(n.openFolders=on({},e.openFolders),delete n.openFolders[t]),n}),(function(){e.props.onSelectionUpdate([]),e.props.onDeleteFolder(t)}))},e.downloadFile=function(t){e.setState({activeAction:null,actionTargets:[]},(function(){"function"==typeof e.props.onDownloadFile&&e.props.onDownloadFile(t)}))},e.downloadFolder=function(t){e.setState({activeAction:null,actionTargets:[]},(function(){e.props.onDownloadFolder(t)}))},e.beginAction=function(t,n){e.setState({activeAction:t,actionTargets:n||[]})},e.endAction=function(){e.state.selection&&e.state.selection.length>0&&e.state.selection.filter((function(e){return e.match(dn)})).length>0&&(e.setState({selection:[]}),e.props.onSelectionUpdate([])),e.beginAction(null,null)},e.select=function(t,n,r,o){var i=e.state.actionTargets,l=i.length&&!i.includes(t),a=e.getFile(t),c=[t];if(r||o){var s=e.state.selection.indexOf(t);c=-1!==s?[].concat(tn(e.state.selection.slice(0,s)),tn(e.state.selection.slice(s+1))):[].concat(tn(e.state.selection),[t])}e.setState((function(e){return{selection:c,actionTargets:l?[]:i,activeAction:l?null:e.activeAction}}),(function(){e.props.onSelectionUpdate(c),e.props.onSelect(a),"file"===n&&e.props.onSelectFile(a),"folder"===n&&e.props.onSelectFolder(a)}))},e.preview=function(t){e.state.previewFile&&e.state.previewFile.key!==t.key&&e.closeDetail(),e.setState({previewFile:t},(function(){e.props.onPreviewOpen(t)}))},e.closeDetail=function(){e.setState({previewFile:null},(function(){e.props.onPreviewClose(e.state.previewFile)}))},e.handleShowMoreClick=function(t){t.preventDefault(),e.setState((function(e){return{searchResultsShown:e.searchResultsShown+20}}))},e.toggleFolder=function(t){var n=t in e.state.openFolders;e.setState((function(e){var r={openFolders:on({},e.openFolders)};return n?delete r.openFolders[t]:r.openFolders[t]=!0,r}),(function(){var r=n?"onFolderClose":"onFolderOpen";e.props[r](e.getFile(t))}))},e.openFolder=function(t){e.setState((function(e){return{openFolders:on(on({},e.openFolders),{},ln({},t,!0))}}),(function(){e.props.onFolderOpen(e.getFile(t))}))},e.handleGlobalClick=function(t){e.browserRef&&e.browserRef.contains(t.target)||(e.setState({selection:[],actionTargets:[],activeAction:null}),e.props.onSelectionUpdate([]))},e.handleActionBarRenameClick=function(t){t.preventDefault(),e.beginAction("rename",e.state.selection)},e.handleActionBarDeleteClick=function(t){t.preventDefault(),e.beginAction("delete",e.state.selection)},e.handleActionBarAddFolderClick=function(t){t.preventDefault(),"createFolder"!==e.state.activeAction&&(e.setState((function(t){var n="";t.selection&&t.selection.length>0&&"/"!==(n+=t.selection).substr(n.length-1,n.length)&&(n+="/"),"__new__/"===n||n.endsWith("/__new__/")||(n+="__new__/");var r={actionTargets:[n],activeAction:"createFolder",selection:[n]};return t.selection&&t.selection.length>0&&(r.openFolders=on(on({},t.openFolders),{},ln({},e.state.selection,!0))),r})),e.props.onSelectionUpdate(e.state.selection))},e.handleActionBarDownloadClick=function(t){t.preventDefault();var n=e.getFiles(),r=e.getSelectedItems(n);1===r.length&&A(r[0])?e.downloadFolder(e.state.selection):e.downloadFile(e.state.selection)},e.handleActionBarUploadClick=function(){e.props.onUploadFile(e.state.selection)},e.handleActionBarExternalViewerClick=function(){var t=e.getFiles(),n=e.getSelectedItems(t);e.props.onExternalViewerClick(1===n.length?n[0]:null)},e.handleFileDoubleClick=function(t){"function"==typeof e.props.onFileDoubleClick&&e.props.onFileDoubleClick(t)},e.updateFilter=function(t){e.setState({nameFilter:t,searchResultsShown:20})},e.handleMultipleDeleteSubmit=function(){e.deleteFolder(e.state.selection.filter((function(e){return"/"===e[e.length-1]}))),e.deleteFile(e.state.selection.filter((function(e){return"/"!==e[e.length-1]})))},e}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this;!this.state.locale&&this.props.locale&&y().changeLanguage(this.props.locale).then((function(t){return e.setState({t:e.props.t})})),"table"===this.props.renderStyle&&this.props.nestChildren&&console.warn("Invalid settings: Cannot nest table children in file browser"),window.addEventListener("click",this.handleGlobalClick)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleGlobalClick)}},{key:"getBrowserProps",value:function(){return{nestChildren:this.props.nestChildren,fileRenderer:this.props.fileRenderer,fileRendererProps:this.props.fileRendererProps,folderRenderer:this.props.folderRenderer,folderRendererProps:this.props.folderRendererProps,confirmDeletionRenderer:this.props.confirmDeletionRenderer,confirmMultipleDeletionRenderer:this.props.confirmMultipleDeletionRenderer,icons:this.props.icons,backend:this.props.backend,openFolders:this.state.openFolders,nameFilter:this.state.nameFilter,selection:this.state.selection,activeAction:this.state.activeAction,actionTargets:this.state.actionTargets,select:this.select,openFolder:this.openFolder,toggleFolder:this.toggleFolder,beginAction:this.beginAction,endAction:this.endAction,preview:this.preview,fileDoubleClick:this.handleFileDoubleClick,createFiles:this.props.onCreateFiles?this.createFiles:void 0,createFolder:this.props.onCreateFolder?this.createFolder:void 0,renameFile:this.props.onRenameFile?this.renameFile:void 0,renameFolder:this.props.onRenameFolder?this.renameFolder:void 0,moveFile:this.props.onMoveFile?this.moveFile:void 0,moveFolder:this.props.onMoveFolder?this.moveFolder:void 0,deleteFile:this.props.onDeleteFile?this.deleteFile:void 0,deleteFolder:this.props.onDeleteFolder?this.deleteFolder:void 0,getItemProps:mn}}},{key:"renderActionBar",value:function(e){var t,n,r=this.props,o=r.icons,i=r.canFilter,l=r.filterRendererProps,a=r.filterRenderer,c=r.actionRenderer,s=r.onCreateFolder,u=r.onRenameFile,f=r.onRenameFolder,p=r.onDeleteFile,d=r.onDeleteFolder,m=r.onDownloadFile,y=r.onDownloadFolder,b=r.onUploadFile,g=r.onExternalViewerClick,v=this.getBrowserProps(),F=1===e.length&&A(e[0]),w=1===e.length&&(null===(t=e[0])||void 0===t?void 0:t.with_external_viewer);i&&(n=h().createElement(a,en({value:this.state.nameFilter,updateFilter:this.updateFilter},l)));var O=h().createElement(c,{browserProps:v,selectedItems:e,isFolder:F,icons:o,nameFilter:this.state.nameFilter,canCreateFolder:"function"==typeof s,onCreateFolder:this.handleActionBarAddFolderClick,canRenameFile:"function"==typeof u,onRenameFile:this.handleActionBarRenameClick,canRenameFolder:"function"==typeof f,onRenameFolder:this.handleActionBarRenameClick,canDeleteFile:"function"==typeof p,onDeleteFile:this.handleActionBarDeleteClick,canDeleteFolder:"function"==typeof d,onDeleteFolder:this.handleActionBarDeleteClick,canDownloadFile:"function"==typeof m,onDownloadFile:this.handleActionBarDownloadClick,canDownloadFolder:"function"==typeof y,onDownloadFolder:this.handleActionBarDownloadClick,canUploadFile:"function"==typeof b,onUploadFile:this.handleActionBarUploadClick,canExternalViewer:"function"==typeof g&&w,onExternalViewerClick:this.handleActionBarExternalViewerClick,onFileDoubleClick:this.handleFileDoubleClick});return h().createElement("div",{className:"action-bar"},n,O)}},{key:"renderFiles",value:function(e,t){var n=this,r=this.props,o=r.fileRenderer,i=r.fileRendererProps,l=r.folderRenderer,a=r.folderRendererProps,c=this.getBrowserProps(),s=[];return e.map((function(e){var r=on(on({},c.getItemProps(e,c)),{},{depth:n.state.nameFilter?0:t});A(e)?(!n.props.showFoldersOnFilter&&n.state.nameFilter||s.push(h().createElement(l,en({},e,r,{browserProps:c},a))),(n.state.nameFilter||r.isOpen&&!c.nestChildren)&&(s=s.concat(n.renderFiles(e.children,t+1)))):s.push(h().createElement(o,en({},e,r,{browserProps:c},i,{columns:n.props.columns})))})),s}},{key:"getFiles",value:function(){var e=this.props.files.concat([]);if("createFolder"===this.state.activeAction&&e.push({key:this.state.actionTargets[0],size:0,draft:!0}),this.state.nameFilter){var t=[],n=this.state.nameFilter.toLowerCase().split(" ");e.map((function(e){var r=!1;n.map((function(t){-1===e.key.toLowerCase().trim().indexOf(t)&&(r=!0)})),r||t.push(e)})),e=t}if("function"==typeof this.props.group)e=this.props.group(e,"");else{var r=[];e.map((function(e){A(e)||r.push(e)})),e=r}return"function"==typeof this.props.sort&&(e=this.props.sort(e)),e}},{key:"getSelectedItems",value:function(e){var t=this.state.selection,n=[];return e.map((function e(r){t.includes(r.key)&&n.push(r),r.children&&r.children.map(e)})),n}},{key:"render",value:function(){var e,t,n=this,r=(this.props.t,{browserProps:this.getBrowserProps(),fileKey:"",fileCount:this.props.files.length}),o=this.getFiles(),i=this.getSelectedItems(o),l=this.renderFiles(o,0);switch(this.props.renderStyle){case"table":l.length?this.state.nameFilter&&l.length>(l=l.slice(0,this.state.searchResultsShown)).length&&l.push(h().createElement("tr",{key:"show-more"},h().createElement("td",{colSpan:100},h().createElement("a",{onClick:this.handleShowMoreClick,href:"#"},"Show more results")))):l=this.state.nameFilter?h().createElement("tr",null,h().createElement("td",{colSpan:100},this.state.t("noFilesMatching"),'"',this.state.nameFilter,'".')):h().createElement("tr",null,h().createElement("td",{colSpan:100},this.props.noFilesMessage?this.props.noFilesMessage:this.state.t("noFiles"))),this.props.headerRenderer&&(t=h().createElement("thead",null,h().createElement(this.props.headerRenderer,en({},r,this.props.headerRendererProps,{columns:this.props.columns})))),e=h().createElement("table",{cellSpacing:"0",cellPadding:"0"},t,h().createElement("tbody",null,l));break;case"list":var a;l.length?(this.state.nameFilter&&l.length>(l=l.slice(0,this.state.searchResultsShown)).length&&(a=h().createElement("a",{onClick:this.handleShowMoreClick,href:"#"},"Show more results")),l=h().createElement("div",null,h().createElement("ul",null,l),a)):l=this.state.nameFilter?h().createElement("p",{className:"empty"},this.state.t("noFilesMatching")+this.state.nameFilter):h().createElement("p",{className:"empty"},this.state.t("noFiles")),this.props.headerRenderer&&(t=h().createElement(this.props.headerRenderer,en({},r,this.props.headerRendererProps))),e=h().createElement("div",null,t,l)}var c=this.props.confirmMultipleDeletionRenderer;return h().createElement(b.DndProvider,{backend:this.props.backend},h().createElement("div",{className:"rendered-react-keyed-file-browser"},this.props.actions,h().createElement("div",{className:"rendered-file-browser",ref:function(e){n.browserRef=e}},this.props.showActionBar&&this.renderActionBar(i),"delete"===this.state.activeAction&&this.state.selection.length>1&&h().createElement(c,{handleDeleteSubmit:this.handleMultipleDeleteSubmit}),h().createElement("div",{className:"files"},e)),null!==this.state.previewFile&&h().createElement(this.props.detailRenderer,en({file:this.state.previewFile,close:this.closeDetail},this.props.detailRendererProps))))}}])&&cn(t.prototype,n),o}(h().Component);yn.propTypes={files:p().arrayOf(p().shape({key:p().string.isRequired,modified:p().number,size:p().number,backend:p().object,icon:p().element})).isRequired,locale:p().string,actions:p().node,showActionBar:p().bool.isRequired,canFilter:p().bool.isRequired,showFoldersOnFilter:p().bool,noFilesMessage:p().string,group:p().func.isRequired,sort:p().func.isRequired,icons:p().shape({Folder:p().element,FolderOpen:p().element,File:p().element,PDF:p().element,Image:p().element,Delete:p().element,Rename:p().element,Loading:p().element,Download:p().element}),columns:p().array,nestChildren:p().bool.isRequired,renderStyle:p().oneOf(["list","table"]).isRequired,startOpen:p().bool.isRequired,headerRenderer:p().func,headerRendererProps:p().object,filterRenderer:p().func,filterRendererProps:p().object,fileRenderer:p().func,fileRendererProps:p().object,folderRenderer:p().func,folderRendererProps:p().object,detailRenderer:p().func,detailRendererProps:p().object,actionRenderer:p().func,confirmDeletionRenderer:p().func,confirmMultipleDeletionRenderer:p().func,onCreateFiles:p().oneOfType([p().func,p().bool]),onCreateFolder:p().oneOfType([p().func,p().bool]),onMoveFile:p().oneOfType([p().func,p().bool]),onMoveFolder:p().oneOfType([p().func,p().bool]),onRenameFile:p().oneOfType([p().func,p().bool]),onRenameFolder:p().oneOfType([p().func,p().bool]),onDeleteFile:p().oneOfType([p().func,p().bool]),onDeleteFolder:p().oneOfType([p().func,p().bool]),onDownloadFile:p().oneOfType([p().func,p().bool]),onDownloadFolder:p().oneOfType([p().func,p().bool]),onUploadFile:p().oneOfType([p().func,p().bool]),onExternalViewerClick:p().oneOfType([p().func,p().bool]),onSelect:p().func,onSelectFile:p().func,onSelectFolder:p().func,onSelectionUpdate:p().func,onPreviewOpen:p().func,onPreviewClose:p().func,onFolderOpen:p().func,onFolderClose:p().func},yn.defaultProps={showActionBar:!0,canFilter:!0,showFoldersOnFilter:!1,noFilesMessage:"",locale:"en",backend:null,group:Mt,sort:Ht,nestChildren:!1,renderStyle:"table",columns:Object.keys(hn).map((function(e){return hn[e]})),startOpen:!1,headerRenderer:pe,headerRendererProps:{},filterRenderer:j,filterRendererProps:{},fileRenderer:Ye,fileRendererProps:{},folderRenderer:jt,folderRendererProps:{},detailRenderer:S,detailRendererProps:{},actionRenderer:Qt,confirmDeletionRenderer:Tt,confirmMultipleDeletionRenderer:At,icons:{},onSelect:function(e){},onSelectFile:function(e){},onSelectFolder:function(e){},onSelectionUpdate:function(){},onPreviewOpen:function(e){},onPreviewClose:function(e){},onFolderOpen:function(e){},onFolderClose:function(e){}};var bn=function(e){sn(n,e);var t=fn(n);function n(){return an(this,n),t.apply(this,arguments)}return n}(yn);const gn=(0,g.withNamespaces)()(bn);var vn=function(e){var t,n=4===e?"fa":"fas",r=4===e?["FontAwesome",'"FontAwesome"']:['"Font Awesome 5 Free"','"Font Awesome 5 Pro"'],o=!1,i=document.createElement("span");return i.className=n,i.style.display="none",document.body.insertBefore(i,document.body.firstChild),r.includes((t=i,"font-family",window.getComputedStyle(t,null).getPropertyValue("font-family")))?o=!0:console.warn("Font Awesome ".concat(e," was not detected but Font Awesome ").concat(e," icons have been requested for `react-object-list`")),document.body.removeChild(i),o};const Fn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;switch(e){case 4:return vn(4),{File:h().createElement("i",{className:"fa fa-file-o","aria-hidden":"true"}),Image:h().createElement("i",{className:"fa fa-file-image-o","aria-hidden":"true"}),Video:h().createElement("i",{className:"fa fa-file-video-o","aria-hidden":"true"}),Audio:h().createElement("i",{className:"fa fa-file-audio-o","aria-hidden":"true"}),Archive:h().createElement("i",{className:"fa fa-file-archive-o","aria-hidden":"true"}),Word:h().createElement("i",{className:"fa fa-file-word-o","aria-hidden":"true"}),Excel:h().createElement("i",{className:"fa fa-file-excel-o","aria-hidden":"true"}),PowerPoint:h().createElement("i",{className:"fa fa-file-powerpoint-o","aria-hidden":"true"}),Text:h().createElement("i",{className:"fa fa-file-text-o","aria-hidden":"true"}),PDF:h().createElement("i",{className:"fa fa-file-pdf-o","aria-hidden":"true"}),Rename:h().createElement("i",{className:"fa fa-i-cursor","aria-hidden":"true"}),Folder:h().createElement("i",{className:"fa fa-folder-o","aria-hidden":"true"}),FolderOpen:h().createElement("i",{className:"fa fa-folder-open-o","aria-hidden":"true"}),Delete:h().createElement("i",{className:"fa fa-trash-o","aria-hidden":"true"}),Loading:h().createElement("i",{className:"fa fa-circle-o-notch fa-spin","aria-hidden":"true"}),Download:h().createElement("i",{className:"fa fa-download","aria-hidden":"true"})};case 5:return vn(5),{File:h().createElement("i",{className:"far fa-file","aria-hidden":"true"}),Image:h().createElement("i",{className:"far fa-file-image","aria-hidden":"true"}),Video:h().createElement("i",{className:"far fa-file-video","aria-hidden":"true"}),Audio:h().createElement("i",{className:"far fa-file-audio","aria-hidden":"true"}),Archive:h().createElement("i",{className:"far fa-file-archive","aria-hidden":"true"}),Word:h().createElement("i",{className:"far fa-file-word","aria-hidden":"true"}),Excel:h().createElement("i",{className:"far fa-file-excel","aria-hidden":"true"}),PowerPoint:h().createElement("i",{className:"far fa-file-powerpoint","aria-hidden":"true"}),Text:h().createElement("i",{className:"far fa-file-alt","aria-hidden":"true"}),PDF:h().createElement("i",{className:"far fa-file-pdf","aria-hidden":"true"}),Rename:h().createElement("i",{className:"fas fa-i-cursor","aria-hidden":"true"}),Folder:h().createElement("i",{className:"far fa-folder","aria-hidden":"true"}),FolderOpen:h().createElement("i",{className:"far fa-folder-open","aria-hidden":"true"}),Delete:h().createElement("i",{className:"far fa-trash-alt","aria-hidden":"true"}),Loading:h().createElement("i",{className:"fas fa-circle-notch fa-spin","aria-hidden":"true"}),Download:h().createElement("i",{className:"fas fa-download","aria-hidden":"true"})};default:console.warn("Could not find config for version ".concat(e),"Accepted versions are: 4, 5","Please make an issue in `react-object-list` to fix this.")}},wn=gn;return t})()));